"use strict";var app=angular.module("eliteApp",["ui.router"]);app.config(function(e,o){o.otherwise("/"),e.state("welcome",{url:"/",templateUrl:"./public/html/welcome.html",controller:"WelcomeCtrl"}).state("return",{url:"/return",templateUrl:"./public/html/return.html",controller:"ReturnCtrl"}).state("search",{url:"/search",templateUrl:"./public/html/search.html",controller:"SearchCtrl"}).state("finder",{parent:"return",templateUrl:"./public/html/searchPanel.html",controller:"FinderCtrl"}).state("control",{parent:"return",templateUrl:"./public/html/controlPanel.html",controller:"ControlCtrl"}).state("history",{parent:"return",templateUrl:"./public/html/history.html",controller:"HistoryCtrl"}).state("favorite",{parent:"return",templateUrl:"./public/html/favorite.html",controller:"FavoriteCtrl"})}),app.controller("InitCtrl",["$scope","$timeout","$state",function(e,o,t){}]),app.controller("WelcomeCtrl",["$scope","$timeout","$http","radarService","$state",function(e,o,t,r,a){console.log(localStorage),localStorage.visited?a.go("return"):a.go("welcome"),e.firstPhase=!1,e.secondPhase=!1,e.thirdPhase=!1,e.showFirstPhase=function(){e.firstPhase=!0},e.showSecondPhase=function(){e.secondPhase=!0},e.showThirdPhase=function(){e.thirdPhase=!0},o(e.showFirstPhase,2e3),o(e.showSecondPhase,3e3),o(e.showThirdPhase,4e3),e.radarImage=!1;new Waypoint({element:document.getElementById("radarImageTrigger"),handler:function(o){console.log("Radar hit:",o),"down"===o&&(e.radarImage=!0,console.log(e.radarImage),e.$apply())},offset:"80%"});e.depthImage=!1;var n=(new Waypoint({element:document.getElementById("depthImageTrigger"),handler:function(o){console.log("Radar hit:",o),"down"===o&&(e.depthImage=!0,console.log(e.depthImage),e.$apply())},offset:"80%"}),"Guest"),l="Fremont, CA";e.saveInfo=function(){localStorage.fullName=JSON.stringify(e.fullName),localStorage.homeLocation=JSON.stringify(e.homeLocation),localStorage.memberSince=JSON.stringify(Date.now()),e.fullName="",e.homeLocation="",localStorage.visited=JSON.stringify(!0),localStorage.firstVisit=JSON.stringify(!0),a.go("return")},e.saveInfoGuest=function(){localStorage.fullName=JSON.stringify(n),localStorage.homeLocation=JSON.stringify(l),localStorage.memberSince=JSON.stringify(Date.now()),e.fullName="",e.homeLocation="",localStorage.visited=JSON.stringify(!0),localStorage.firstVisit=JSON.stringify(!0),a.go("return")}}]),app.controller("ReturnCtrl",["$scope","$http","$timeout","$state",function(e,o,t,r){r.go("control"),e.firstVisit=JSON.parse(localStorage.firstVisit),localStorage.visited||r.go("welcome"),e.firstVisit===!0&&(localStorage.firstVisit=JSON.stringify(!1)),e.firstPhase=!1,e.fullName=JSON.parse(localStorage.fullName),e.showFirstPhase=function(){e.firstPhase=!0},t(e.showFirstPhase,1e3)}]),app.controller("SearchCtrl",["$scope","$http",function(e,o){$(function(){$('[data-toggle="tooltip"]').tooltip()}),console.log("Search controller loaded!"),e.day,e.temp,e.pressure,e.condition,e.grade,e.technique=["Deep Water","Top Water","Trolling"][Math.floor(3*Math.random())];var t="http://api.wunderground.com/api/dec8bf3b3a454036/forecast10day/q/CA/Fremont.json",r="http://api.wunderground.com/api/dec8bf3b3a454036/conditions/q/CA/Fremont.json";o.get(t).then(function(o){e.day=o.data.forecast.simpleforecast.forecastday[0].date.weekday,e.temp=o.data.forecast.simpleforecast.forecastday[0].high.fahrenheit,e.condition=o.data.forecast.simpleforecast.forecastday[0].conditions,e.grade=["A+","A","A-","B+","B","B-","C+","C","C-","D+"][Math.floor(10*Math.random())]}),o.get(r).then(function(o){var t=o.data.current_observation.pressure_mb;t>1086?e.pressure="Extremely High: "+t:t>1030?e.pressure="High: "+t:t>1013?e.pressure="Average: "+t:t>1e3?e.pressure="Low: "+t:t>980?e.pressure="Semi-dangerously low: "+t:t>950?e.pressure="DANGER! Very low: "+t:t>870?e.pressure="EXTREME DANGER! Record low: "+t:870>t&&(e.pressure="Stay inside, Tornado warning! "+t),e.displayMore=!1,console.log(e.displayMore),e.expand=function(){console.log("I COMMAND YOU TO EXPAND!"),e.displayMore=!e.displayMore}})}]),app.controller("ControlCtrl",["$scope","$state","$timeout",function(e,o,t){console.log("Control Controller loaded!"),e.secondPhase=!1,e.showSecondPhase=function(){e.secondPhase=!0},t(e.showSecondPhase,2e3),e.searchBar=function(){o.go("finder")},e.history=function(){o.go("history")},e.favorite=function(){o.go("favorite")}}]),app.controller("FinderCtrl",["$scope","$state","$timeout",function(e,o,t){e.thirdPhase=!1,e.showThirdPhase=function(){e.thirdPhase=!0},t(e.showThirdPhase,300),console.log("SEARCH CONTROLLER"),e.searchModal=function(){$(function(){$('[data-toggle="tooltip"]').tooltip()}),console.log("Search controller loaded!"),e.day,e.temp,e.pressure,e.condition,e.grade,e.technique=["Deep Water","Top Water","Trolling"][Math.floor(3*Math.random())];var o="http://api.wunderground.com/api/dec8bf3b3a454036/forecast10day/q/CA/Fremont.json",t="http://api.wunderground.com/api/dec8bf3b3a454036/conditions/q/CA/Fremont.json";$http.get(o).then(function(o){e.day=o.data.forecast.simpleforecast.forecastday[0].date.weekday,e.temp=o.data.forecast.simpleforecast.forecastday[0].high.fahrenheit,e.condition=o.data.forecast.simpleforecast.forecastday[0].conditions,e.grade=["A+","A","A-","B+","B","B-","C+","C","C-","D+"][Math.floor(10*Math.random())]}),$http.get(t).then(function(o){var t=o.data.current_observation.pressure_mb;t>1086?e.pressure="Extremely High: "+t:t>1030?e.pressure="High: "+t:t>1013?e.pressure="Average: "+t:t>1e3?e.pressure="Low: "+t:t>980?e.pressure="Semi-dangerously low: "+t:t>950?e.pressure="DANGER! Very low: "+t:t>870?e.pressure="EXTREME DANGER! Record low: "+t:870>t&&(e.pressure="Stay inside, Tornado warning! "+t),e.displayMore=!1,console.log(e.displayMore),e.expand=function(){console.log("I COMMAND YOU TO EXPAND!"),e.displayMore=!e.displayMore}})}}]),app.controller("HistoryCtrl",["$scope",function(e){console.log("History Controller loaded!")}]),app.controller("FavoriteCtrl",["$scope",function(e){console.log("Favorite Controller loaded")}]),app.controller("NavionicsCtrl",["$scope","$http",function(e,o){console.log("NAVIONICS WORKS!!!")}]),app.service("radarService",function(e){var o="http://api.wunderground.com/api/dec8bf3b3a454036/geolookup/q/autoip.json";this.getIP=function(){return e.get(o)}});