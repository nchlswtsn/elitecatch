"use strict";var app=angular.module("eliteApp",["ui.router"]);app.config(function(e,t){t.otherwise("/"),e.state("welcome",{url:"/",templateUrl:"./public/html/welcome.html",controller:"WelcomeCtrl"}).state("return",{url:"/return",templateUrl:"./public/html/return.html",controller:"ReturnCtrl"}).state("search",{parent:"return",templateUrl:"./public/html/search.html",controller:"SearchCtrl"}).state("finder",{parent:"return",templateUrl:"./public/html/searchPanel.html",controller:"FinderCtrl"}).state("control",{parent:"return",templateUrl:"./public/html/controlPanel.html",controller:"ControlCtrl"}).state("history",{parent:"return",templateUrl:"./public/html/history.html",controller:"HistoryCtrl"}).state("favorite",{parent:"return",templateUrl:"./public/html/favorite.html",controller:"FavoriteCtrl"})}),app.controller("InitCtrl",["$scope","$timeout","$state",function(e,t,o){mixpanel.track("Home Page Visited")}]),app.controller("WelcomeCtrl",["$scope","$timeout","$http","radarService","$state",function(e,t,o,r,a){console.log(localStorage),localStorage.visited?a.go("return"):a.go("welcome"),e.firstPhase=!1,e.secondPhase=!1,e.thirdPhase=!1,e.showFirstPhase=function(){e.firstPhase=!0},e.showSecondPhase=function(){e.secondPhase=!0},e.showThirdPhase=function(){e.thirdPhase=!0},t(e.showFirstPhase,2e3),t(e.showSecondPhase,3e3),t(e.showThirdPhase,4e3),e.radarImage=!1;new Waypoint({element:document.getElementById("radarImageTrigger"),handler:function(t){console.log("Radar hit:",t),"down"===t&&(e.radarImage=!0,console.log(e.radarImage),e.$apply())},offset:"80%"});e.depthImage=!1;var l=(new Waypoint({element:document.getElementById("depthImageTrigger"),handler:function(t){console.log("Radar hit:",t),"down"===t&&(e.depthImage=!0,console.log(e.depthImage),e.$apply())},offset:"80%"}),"Guest"),n="Fremont, CA";e.saveInfo=function(){mixpanel.track("User Joined"),localStorage.fullName=JSON.stringify(e.fullName),localStorage.homeLocation=JSON.stringify(e.homeLocation),localStorage.memberSince=JSON.stringify(Date.now()),e.fullName="",e.homeLocation="",localStorage.visited=JSON.stringify(!0),localStorage.firstVisit=JSON.stringify(!0),a.go("return")},e.saveInfoGuest=function(){mixpanel.track("Tried by Guest"),localStorage.fullName=JSON.stringify(l),localStorage.homeLocation=JSON.stringify(n),localStorage.memberSince=JSON.stringify(Date.now()),e.fullName="",e.homeLocation="",localStorage.visited=JSON.stringify(!0),localStorage.firstVisit=JSON.stringify(!0),a.go("return")}}]),app.controller("ReturnCtrl",["$scope","$http","$timeout","$state",function(e,t,o,r){r.go("control"),e.firstVisit=JSON.parse(localStorage.firstVisit),localStorage.visited||r.go("welcome"),e.firstVisit===!0&&(localStorage.firstVisit=JSON.stringify(!1)),e.firstPhase=!1,e.fullName=JSON.parse(localStorage.fullName),e.showFirstPhase=function(){e.firstPhase=!0},o(e.showFirstPhase,1e3)}]),app.controller("SearchCtrl",["$scope","$http",function(e,t){$(function(){$('[data-toggle="tooltip"]').tooltip()}),console.log("Search controller loaded!"),e.day,e.temp,e.pressure,e.condition,e.grade,e.technique=["Deep Water","Top Water","Trolling"][Math.floor(3*Math.random())];var o="http://api.wunderground.com/api/dec8bf3b3a454036/forecast10day/q/CA/Fremont.json",r="http://api.wunderground.com/api/dec8bf3b3a454036/conditions/q/CA/Fremont.json";t.get(o).then(function(t){e.day=t.data.forecast.simpleforecast.forecastday[0].date.weekday,e.temp=t.data.forecast.simpleforecast.forecastday[0].high.fahrenheit,e.condition=t.data.forecast.simpleforecast.forecastday[0].conditions,e.grade=["A-","B+","B"][Math.floor(3*Math.random())]}),t.get(r).then(function(t){var o=t.data.current_observation.pressure_mb;o>1086?e.pressure="Extremely High: "+o:o>1030?e.pressure="High: "+o:o>1013?e.pressure="Average: "+o:o>1e3?e.pressure="Low: "+o:o>980?e.pressure="Very low: "+o:o>950?e.pressure="Severely low: "+o:o>870?e.pressure="EXTREME DANGER!"+o:870>o&&(e.pressure="Tornado warning! "+o),e.displayMore=!1,console.log(e.displayMore),e.expand=function(){console.log("I COMMAND YOU TO EXPAND!"),e.displayMore=!e.displayMore}}),e.saveSpot=function(){mixpanel.track("Location Saved")}}]),app.controller("ControlCtrl",["$scope","$state","$timeout",function(e,t,o){console.log("Control Controller loaded!"),e.secondPhase=!1,e.showSecondPhase=function(){e.secondPhase=!0},o(e.showSecondPhase,2e3),e.searchBar=function(){t.go("finder")},e.history=function(){t.go("history")},e.favorite=function(){t.go("favorite")}}]),app.controller("FinderCtrl",["$scope","$state","$timeout",function(e,t,o){e.thirdPhase=!1,e.showThirdPhase=function(){e.thirdPhase=!0},o(e.showThirdPhase,300),console.log("SEARCH CONTROLLER"),e.searchData=function(){mixpanel.track("Location searched"),console.log("FINDER?"),t.go("search")}}]),app.controller("HistoryCtrl",["$scope",function(e){console.log("History Controller loaded!")}]),app.controller("FavoriteCtrl",["$scope",function(e){console.log("Favorite Controller loaded")}]),app.controller("NavionicsCtrl",["$scope","$http",function(e,t){console.log("NAVIONICS WORKS!!!")}]),app.service("radarService",function(e){var t="http://api.wunderground.com/api/dec8bf3b3a454036/geolookup/q/autoip.json";this.getIP=function(){return e.get(t)}});